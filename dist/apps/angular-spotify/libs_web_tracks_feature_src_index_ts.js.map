{"version":3,"file":"libs_web_tracks_feature_src_index_ts.js","mappings":"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","sources":["./libs/web/tracks/data-access/src/index.ts","./libs/web/tracks/data-access/src/lib/index.ts","./libs/web/tracks/data-access/src/lib/store/index.ts","./libs/web/tracks/data-access/src/lib/store/tracks.store.ts","./libs/web/tracks/feature/src/index.ts","./libs/web/tracks/feature/src/lib/tracks.component.ts","./libs/web/tracks/feature/src/lib/tracks.component.html","./libs/web/tracks/feature/src/lib/tracks.module.ts"],"sourcesContent":["export * from './lib';","export * from './store';","export * from './tracks.store';\n","import { GenericState } from '@angular-spotify/web/shared/data-access/models';\nimport { PlayerApiService, TrackApiService } from '@angular-spotify/web/shared/data-access/spotify-api';\nimport { SelectorUtil } from '@angular-spotify/web/shared/utils';\nimport { Injectable } from '@angular/core';\nimport { ComponentStore, tapResponse } from '@ngrx/component-store';\nimport { switchMap, tap } from 'rxjs/operators';\n\ntype TracksState = GenericState<SpotifyApi.UsersSavedTracksResponse>;\n\n@Injectable()\nexport class TracksStore extends ComponentStore<TracksState> {\n  loadTracks = this.effect((params$) =>\n    params$.pipe(\n      tap(() => {\n        this.patchState({\n          status: 'loading',\n          error: null\n        });\n      }),\n      switchMap(() =>\n        this.trackApi.getUserSavedTracks().pipe(\n          tapResponse(\n            (response) => {\n              this.patchState({\n                data: response,\n                status: 'success',\n                error: ''\n              });\n            },\n            (error) => {\n              this.patchState({\n                status: 'error',\n                error: error as unknown as string\n              });\n            }\n          )\n        )\n      )\n    )\n  );\n\n  playTrack = this.effect<{ track: SpotifyApi.TrackObjectFull }>((params$) =>\n    params$.pipe(\n      switchMap(({ track }) =>\n        this.playerApi.play({\n          context_uri: track.album.uri,\n          offset: {\n            position: track.track_number - 1\n          }\n        })\n      )\n    )\n  );\n\n  vm$ = this.select((s) => ({\n    ...s,\n    isLoading: SelectorUtil.isLoading(s)\n  }));\n\n  constructor(private trackApi: TrackApiService, private playerApi: PlayerApiService) {\n    super(<TracksState>{});\n  }\n}\n","export * from './lib/tracks.module';\n","import { ChangeDetectionStrategy, Component, OnInit } from '@angular/core';\nimport { TracksStore } from '@angular-spotify/web/tracks/data-access';\n@Component({\n  selector: 'as-tracks',\n  templateUrl: './tracks.component.html',\n  styleUrls: ['./tracks.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  providers: [TracksStore]\n})\nexport class TracksComponent implements OnInit {\n  vm$ = this.store.vm$;\n\n  constructor(private store: TracksStore) {}\n\n  ngOnInit() {\n    this.store.loadTracks();\n  }\n\n  playTrack(track: SpotifyApi.TrackObjectFull) {\n    this.store.playTrack({ track });\n  }\n}\n","<div class=\"content-spacing\">\n  @if (vm$ | async; as vm) {\n    <as-media-summary\n      type=\"Playlist\"\n      [imageUrl]=\"'/assets/images/totoro.jpg'\"\n      [title]=\"'Liked Songs'\"\n      [trackCount]=\"vm.data?.total\"\n      >\n    </as-media-summary>\n    <as-media-table-header>\n      <div class=\"playlist-tracks-grid\">\n        <div>#</div>\n        <div class=\"text-xs uppercase ellipsis-one-line\">Title</div>\n        <div class=\"text-xs uppercase ellipsis-one-line\">Album</div>\n        <div class=\"text-xs uppercase ellipsis-one-line\">Date added</div>\n        <svg-icon [key]=\"'clock'\" title=\"duration\"> </svg-icon>\n      </div>\n    </as-media-table-header>\n    <div class=\"mb-8\">\n      @for (item of vm.data?.items; track item; let idx = $index) {\n        @if (item.track) {\n          <as-playlist-track\n            type=\"LIKE_SONGS\"\n            [item]=\"$any(item)\"\n            [index]=\"idx\"\n            [contextUri]=\"item.track.album.uri\"\n            (dblclick)=\"playTrack(item.track)\"\n            >\n          </as-playlist-track>\n        }\n      }\n    </div>\n    @if (vm.isLoading) {\n      <div class=\"px-8 mb-5 album-loading\">\n        <as-tracks-loading [avatar]=\"true\"> </as-tracks-loading>\n      </div>\n    }\n  }\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { TracksComponent } from './tracks.component';\nimport { WorkInProgressModule } from '@angular-spotify/web/shared/ui/work-in-progress';\nimport { TracksLoadingComponent } from '@angular-spotify/web/shared/ui/tracks-loading';\nimport { MediaSummaryModule } from '@angular-spotify/web/shared/ui/media-summary';\nimport { MediaTableModule } from '@angular-spotify/web/shared/ui/media-table';\nimport { SvgIconComponent } from '@ngneat/svg-icon';\nimport { PlaylistTrackModule } from '@angular-spotify/web/playlist/ui/playlist-track';\n@NgModule({\n  imports: [\n    CommonModule,\n    WorkInProgressModule,\n    RouterModule.forChild([\n      {\n        path: '',\n        component: TracksComponent\n      }\n    ]),\n    TracksLoadingComponent,\n    MediaSummaryModule,\n    MediaTableModule,\n    SvgIconComponent,\n    PlaylistTrackModule,\n  ],\n  declarations: [TracksComponent],\n  exports: [TracksComponent]\n})\nexport class TracksModule {}\n"],"names":["PlayerApiService","TrackApiService","SelectorUtil","ComponentStore","tapResponse","switchMap","tap","TracksStore","constructor","trackApi","playerApi","loadTracks","effect","params$","pipe","patchState","status","error","getUserSavedTracks","response","data","playTrack","track","play","context_uri","album","uri","offset","position","track_number","vm$","select","s","isLoading","_","i0","ɵɵinject","i1","_2","factory","ɵfac","ɵɵelementStart","ɵɵlistener","TracksComponent_Conditional_1_For_14_Conditional_0_Template_as_playlist_track_dblclick_0_listener","ɵɵrestoreView","_r1","item_r2","ɵɵnextContext","$implicit","ctx_r2","ɵɵresetView","ɵɵelementEnd","ɵɵproperty","idx_r5","ɵɵtemplate","TracksComponent_Conditional_1_For_14_Conditional_0_Template","ɵɵconditional","ɵɵelement","ɵɵadvance","ɵɵtext","ɵɵrepeaterCreate","TracksComponent_Conditional_1_For_14_Template","ɵɵrepeaterTrackByIdentity","TracksComponent_Conditional_1_Conditional_15_Template","vm_r6","total","ɵɵrepeater","items","TracksComponent","store","ngOnInit","ɵɵdirectiveInject","selectors","features","ɵɵProvidersFeature","decls","vars","consts","template","TracksComponent_Template","rf","ctx","TracksComponent_Conditional_1_Template","tmp_0_0","ɵɵpipeBind1","CommonModule","RouterModule","WorkInProgressModule","TracksLoadingComponent","MediaSummaryModule","MediaTableModule","SvgIconComponent","PlaylistTrackModule","TracksModule","_3","forChild","path","component","declarations","imports","exports"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}